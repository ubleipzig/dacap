<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>English - dacap</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">dacap</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">Deutsch</a>
                    </li>
                    <li class="active">
                        <a href="./">English</a>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="..">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li class="disabled">
                        <a rel="prev" >
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#dacap">dacap</a></li>
            <li><a href="#requirements">Requirements</a></li>
            <li><a href="#local-execution">local Execution</a></li>
            <li><a href="#as-container">as Container</a></li>
            <li><a href="#usage">Usage</a></li>
            <li><a href="#advanced-configuration">Advanced Configuration</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="dacap">dacap</h1>
<p><a href="https://git.sc.uni-leipzig.de/ubl/bdd_dev/dacap/commits/master"><img alt="pipeline status" src="https://git.sc.uni-leipzig.de/ubl/bdd_dev/dacap/badges/master/pipeline.svg" /></a>
<a href="https://git.sc.uni-leipzig.de/ubl/bdd_dev/dacap/commits/master"><img alt="coverage report" src="https://git.sc.uni-leipzig.de/ubl/bdd_dev/dacap/badges/master/coverage.svg" /></a></p>
<p><em>Dynamic And Compressing Api Proxy</em> is a service which lets you proxy arbitrary API-Endpoints which are by themself to slow to be used in production environments. All cached Responses are held in memory, so be sure to provide enough.</p>
<h2 id="requirements">Requirements</h2>
<ul>
<li>node &gt;= v8.2.1</li>
<li>npm &gt;= v5.3.0</li>
</ul>
<h2 id="local-execution">local Execution</h2>
<h3 id="installation">Installation</h3>
<pre><code class="bash">$# npm install -g @ubleipzig/dacap
</code></pre>

<h3 id="execution">Execution</h3>
<pre><code class="bash">$# dacap
</code></pre>

<h2 id="as-container">as Container</h2>
<pre><code class="bash">$# docker run -p 3000:3000 -v /my/hosts/data/folder:/data ubleipzig/dacap
</code></pre>

<p>You can customize multiple values, see <a href="#Advanced-Configuration">Advanced Configuration</a></p>
<h2 id="usage">Usage</h2>
<p>After Start the Admin-Interface is available under <code>http://localhost:3000/admin</code>.</p>
<p>First of all one has to define a <em>Cache</em> where the requests to an API-Endpoint are stored. This is done from within the Admin Interface.</p>
<p>One has to define the URL to the desired <em>API-Endpoint</em> (e.g. <code>http://foo.example.com/</code>) and a <em>Cache-Name</em> for this API-Endpoint (e.g. <code>foo</code>).</p>
<p>All API-Requests which normally would go to</p>
<p><code>http://foo.example.com/?query=foo&amp;offset=0&amp;limit=10</code></p>
<p>now you can request by accessing</p>
<p><code>http://localhost:3000/ep/foo/?query=foo&amp;offset=0&amp;limit=10</code></p>
<ul>
<li><em>Be sure to append the Slash after the Cache-Name, otherwise the Endpoint cannot be resolved.</em></li>
<li><em>Everything after the Cache-Name and Slash will be passed to the API-Endpoint.</em></li>
</ul>
<h2 id="advanced-configuration">Advanced Configuration</h2>
<p>The service can be configured by environment variables. The following are available:</p>
<ul>
<li><code>data_dir</code>: Specifies the folder where the cache is stored in intervals. This is only used to make it more easy to restart the service without adding all Endpoints again. After restart the service reads the saved cache-file and keeps it in memory. By default this points to the <code>data</code>-folder where the process was invoked. Make sure it can be created if not existing and written if already existing.</li>
<li><code>proxy_path</code>: Specifies the path where the Endpoints will be accessable after registering. By default this is <code>/ep/</code>.</li>
<li><code>proxy_port</code>: Specifies the port number where the service is listening. Defaults to <code>3000</code>.</li>
<li><code>proxy_url</code>: Specifies the absolute url of the service with protocol and port if differing from the defaults (e.g. <code>https://api.example.com:8443/dacap</code>). Defaults to <code>http://localhost:${proxy_port}</code>.</li>
<li><code>cache_ttl</code>: Specifies the time-to-live in seconds of a cached request. after this time the cache will be refreshed. Defaults to <code>600</code></li>
<li><code>default_check_period</code>: Specifies the interval in seconds the cache is checked for expiry. Defaults to <code>60</code></li>
<li><code>array_value_size</code>: Unkown configuration. Defaults to <code>40</code></li>
<li><code>object_value_size</code>: Unkown configuration. Defaults to <code>80</code></li>
<li><code>autosave_interval</code>: Specifies the interval the cache is stored to harddisk. Defaults to <code>60</code>.</li>
<li><code>register_name</code>: Specifies the name of the register where the cache is stored. Defaults to <code>api-cache</code>.</li>
<li><code>strip_path</code>: Specifies whether the path should be stripped when processing requests. Defaults to <code>true</code>.</li>
<li><code>user</code>: Specifies the user for simple basic authentication. Defaults to <code>undefined</code>.</li>
<li><code>password</code>: Specifies the password for simple basic authentication. Defaults to <code>undefined</code>.</li>
</ul>
<p><strong>Only when both <code>user</code> and <code>password</code> are specified basic-auth is enabled</strong></p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script src="../js/base.js"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
